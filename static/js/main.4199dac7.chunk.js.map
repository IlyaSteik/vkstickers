{"version":3,"sources":["components/StickerImg.js","components/StickerButton.js","components/StickerDescription.js","components/StickerGrid.js","components/StickerUploadButton.js","App.js","index.js"],"names":["StickerImg","this","props","mode","width","height","src","id","onClick","size","hasOwnProperty","className","style","borderRadius","color","fontSize","children","PureComponent","StickerButton","before","description","author","bottomContent","mode2","price","button","title","StickerDescription","dangerouslySetInnerHTML","__html","replace","StickerGrid","minWidth","maxWidth","display","gridTemplateColumns","gridGap","StickerUploadButton","type","ref","upload_preview","upload_stickers","onChange","click","multiline","access_token","App","back","activeStory","state","activePanel","activePanelShop","activePanelOther","panel_to_change","bridge","send","history","historyShop","historyOther","length","pop","p","setState","popout","slideTabIndex","createStickerContextOpened","balance_manipulation","stickers","preview","stickers_panel","sticker_info","user","first_name","last_name","photo_100","balance","stickers_history","create_panel","onStoryChange","bind","uploadFile","toggleCreateStickerContext","componentDidMount","initializeApp","go","window","addEventListener","e","preventDefault","subscribe","detail","data","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","added","i","stickers_","j","push","parseInt","currentTarget","split","user_stickers","sticker","setTimeout","user_stickers_history","panel","history_to_change","pushState","story","dataset","name","element","evt","files","target","event","srcElement","t","FileReader","fr","onload","res","result","res1","includes","res10","uploaded_stickers_img","res01","filter","val","undefined","readAsDataURL","img","canvas","createElement","getContext","drawImage","toDataURL","base64","fetch","then","blob","fd","FormData","file","File","append","sticker_id","sendPromise","tabbar","selected","data-story","onSwipeBack","separator","slideWidth","margin","slideIndex","marginTop","indexOf","install","stretched","marginLeft","header","expandable","indicator","justifyContent","aside","transform","opened","onClose","top","status","bottom","toString","upload_preview_img","paddingBottom","disabled","icon","React","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.4199dac7.chunk.js","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport {Avatar} from \"@vkontakte/vkui\";\r\n\r\nexport class StickerImg extends PureComponent {\r\n\r\n    render() {\r\n        return (\r\n            this.props.mode === 'small' ?\r\n                <img width={64} height={64} src={this.props.src} id={this.props.id} onClick={this.props.onClick}/>\r\n                :\r\n                this.props.mode === 'medium' ?\r\n                    <Avatar mode=\"app\" size={78} src={this.props.src} />\r\n                    :\r\n                    this.props.mode === 'big' &&\r\n                        <Avatar size={96}>\r\n                            {this.props.hasOwnProperty('children') ?\r\n                                <div className=\"centered\" style={{ borderRadius: 48, width: \"100%\", height: \"100%\", color: \"#7f8285\", fontSize: 76 }} onClick={this.props.onClick}>{this.props.children}</div>\r\n                            :\r\n                                <img width={96} height={96}\r\n                                     src={this.props.src}\r\n                                     id={this.props.id}\r\n                                     onClick={this.props.onClick}\r\n                                />\r\n                            }\r\n                        </Avatar>\r\n        )\r\n    }\r\n\r\n}","import React, { PureComponent } from 'react';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport { Button, Cell} from \"@vkontakte/vkui\";\r\nimport {StickerImg} from \"./StickerImg\";\r\n\r\nexport class StickerButton extends PureComponent {\r\n\r\n    render() {\r\n        return (\r\n            this.props.mode === 'cell' ?\r\n                <Cell id={this.props.id} onClick={this.props.onClick} before={<StickerImg mode={'medium'} src={this.props.src}/>}\r\n                      description={this.props.author} size={\"l\"}\r\n                      bottomContent={<Button mode={this.props.hasOwnProperty('mode2') ? this.props.mode2 : \"commerce\"}>{this.props.hasOwnProperty('price') ? (this.props.price + ' руб.') : this.props.button}</Button>}>{this.props.title}</Cell>\r\n                :\r\n                this.props.mode === 'img' &&\r\n                <StickerImg\r\n                    mode={\"big\"}\r\n                    src={this.props.src}\r\n                    id={this.props.id}\r\n                    onClick={this.props.onClick}\r\n                />\r\n        )\r\n    }\r\n\r\n}","import React, { PureComponent } from 'react';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nexport class StickerDescription extends PureComponent {\r\n\r\n    render() {\r\n        return (\r\n            <div style={{ color: \"#7f8285\" }} dangerouslySetInnerHTML={{ __html: this.props.children.replace('\\n','<br/>') }} />\r\n        )\r\n    }\r\n\r\n}","import React, { PureComponent } from 'react';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nexport class StickerGrid extends PureComponent {\r\n\r\n    render() {\r\n        return (\r\n            this.props.mode === 'small' ?\r\n                <div style={{ minWidth: \"64px\", maxWidth: \"296px\", display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, 64px)\", gridGap: \"10px\" }}>{this.props.children}</div>\r\n                :\r\n                this.props.mode === 'big' &&\r\n                <div style={{ minWidth: \"96px\", maxWidth: \"320px\", display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, 96px)\", gridGap: \"10px\" }}>{this.props.children}</div>\r\n        )\r\n    }\r\n\r\n}","import React, { PureComponent } from 'react';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport {Cell} from \"@vkontakte/vkui\";\r\nimport {StickerImg} from \"./StickerImg\";\r\n\r\nexport class StickerUploadButton extends PureComponent {\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <input type=\"file\" ref={(ref) => { if(this.props.hasOwnProperty('src')) { this.upload_preview = ref; } else {  this.upload_stickers = ref } }} style={{display: \"none\"}} onChange={this.props.onChange}/>\r\n                <Cell onClick={()=> { if(this.props.hasOwnProperty('src')) { this.upload_preview.click(); } else { this.upload_stickers.click(); } }} before={this.props.hasOwnProperty('src') && <StickerImg mode={'medium'} src={this.props.src}/>} multiline description={this.props.description} >{this.props.title}</Cell>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/App.css'\n\nimport { Panel, PanelHeader, Div , View , ScreenSpinner, List , Cell , Gallery , FormLayout , Input , Avatar , Group , Epic, Tabbar, TabbarItem, Separator, Button, PanelHeaderContext, Header, PanelHeaderSimple, PanelHeaderContent, Placeholder  } from '@vkontakte/vkui';\n\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\nimport Icon16Down from '@vkontakte/icons/dist/16/down';\nimport Icon16Up from '@vkontakte/icons/dist/16/up';\nimport Icon28HistoryForwardOutline from '@vkontakte/icons/dist/28/history_forward_outline';\nimport Icon28MarketOutline from '@vkontakte/icons/dist/28/market_outline';\nimport Icon28UserOutline from '@vkontakte/icons/dist/28/user_outline';\nimport Icon56HistoryOutline from '@vkontakte/icons/dist/56/history_outline';\n\nimport {StickerImg} from \"./components/StickerImg\";\nimport {StickerButton} from \"./components/StickerButton\";\nimport {StickerDescription} from \"./components/StickerDescription\";\nimport {StickerGrid} from \"./components/StickerGrid\";\nimport {StickerUploadButton} from \"./components/StickerUploadButton\";\n\nvar access_token = '';\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpopout: <ScreenSpinner/>,\n\t\t\tactiveStory: 'tab_main',\n\t\t\tslideTabIndex: 0,\n\t\t\tactivePanelShop: \"main\",\n\t\t\thistoryShop: [\"main\"],\n\t\t\tactivePanelOther: \"profile\",\n\t\t\thistoryOther: [\"profile\"],\n\t\t\tcreateStickerContextOpened: false,\n\t\t\tbalance_manipulation: false,\n\t\t\tstickers: [ { title: \"Бисквит\", author: \"Ирина Брэдкэт\", preview: \"https://vk.com/sticker/2-533-cover-140b-0\", price: 1, description: \"Хвост торчком, большие ушки —\\nБерегитесь, печенюшки!\", stickers: [ 'https://vk.com/sticker/1-18945-64', 'https://vk.com/sticker/1-18946-64', 'https://vk.com/sticker/1-18947-64', 'https://vk.com/sticker/1-18948-64', 'https://vk.com/sticker/1-18949-64', 'https://vk.com/sticker/1-18950-64', 'https://vk.com/sticker/1-18951-64', 'https://vk.com/sticker/1-18952-64' ] }, { title: \"Илай\", author: \"Ирина Брэдкэт\", preview: \"https://vk.com/sticker/1-18781-128\", price: 1, description: \"Вышел мишка из берлоги — поселился в диалоге.\", stickers: [ 'https://vk.com/sticker/1-18781-128', 'https://vk.com/sticker/1-18782-128', 'https://vk.com/sticker/1-18783-128', 'https://vk.com/sticker/1-18784-128', 'https://vk.com/sticker/1-18785-128', 'https://vk.com/sticker/1-18786-128', 'https://vk.com/sticker/1-18787-128', 'https://vk.com/sticker/1-18788-128' ] } ],\n\t\t\tstickers_panel: null,\n\t\t\tsticker_info: { title: \"\", author: \"\", preview: \"\", price: 0, description: \"\", stickers: [] },\n\t\t\tuser: {\n\t\t\t\tfirst_name: '',\n\t\t\t\tlast_name: '',\n\t\t\t\tphoto_100: '',\n\t\t\t\tstickers:[ ],\n\t\t\t\tbalance: 0,\n\t\t\t\tstickers_history: [ ]\n\t\t\t},\n\t\t\tcreate_panel: { title: \"\", preview: \"\", price: 1, description: \"\", stickers: [] }\n\t\t};\n\n\t\tthis.onStoryChange = this.onStoryChange.bind(this);\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.uploadFile = this.uploadFile.bind(this);\n\t\tthis.toggleCreateStickerContext = this.toggleCreateStickerContext.bind(this);\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.back = this.back.bind(this);\n\t\tthis.go = this.go.bind(this);\n\t}\n\n\tcomponentDidMount () {\n\t\twindow.addEventListener('popstate', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.back(e);\n\t\t});\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tconsole.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t} else if (type === 'VKWebAppGetUserInfoResult'){\n\t\t\t\tdata.stickers = [ 0 ];\n\t\t\t\tdata.history = [];\n\t\t\t\tdata.balance = 0;\n\t\t\t\tdata.stickers_history = [ { title: \"Илай\", preview: \"https://vk.com/sticker/1-18781-128\", added: false }, { title: \"Бисквит\", author: \"Илья Ульянов\", preview: \"https://vk.com/sticker/2-533-cover-140b-0\" } ];\n\t\t\t\tthis.setState({ popout: null, user: data });\n\t\t\t\tthis.initializeApp();\n\t\t\t}\n\t\t});\n\t\tbridge.send('VKWebAppGetUserInfo');\n\t}\n\n\tinitializeApp() {\n\t\tvar stickers_panel = [];\n\t\tvar stickers = this.state.stickers;\n\t\tfor(var i = 0; i < stickers.length; i++){\n\t\t\tvar stickers_ = [];\n\t\t\tfor(var j = 0; j < stickers[i].stickers.length; j++){\n\t\t\t\tstickers_.push(\n\t\t\t\t\t<StickerImg mode={\"small\"} src={stickers[i].stickers[j]}/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tstickers[i].stickers = stickers_;\n\t\t\tstickers[i].id = i;\n\t\t\tstickers_panel.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\ttitle={stickers[i].title}\n\t\t\t\t\tauthor={stickers[i].author}\n\t\t\t\t\tsrc={stickers[i].preview}\n\t\t\t\t\tprice={stickers[i].price}\n\t\t\t\t\tid={\"sticker_\" + i}\n\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t\tonClick={(e)=> {\n\t\t\t\t\t\tvar id = parseInt(e.currentTarget.id.split('_')[1]);\n\t\t\t\t\t\tthis.setState({sticker_info: stickers[id]});\n\t\t\t\t\t\tthis.go(\"sticker_info\");\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({ stickers_panel });\n\n\t\tvar user_stickers = [];\n\t\tfor(var i = 0; i < this.state.user.stickers.length; i++){\n\t\t\tvar sticker = this.state.stickers[i];\n\t\t\tuser_stickers.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\tsrc={sticker.preview}\n\t\t\t\t\tid={\"user_sticker_\" + i}\n\t\t\t\t\tmode={\"img\"}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tvar id = parseInt(e.currentTarget.id.split('_')[2]);\n\t\t\t\t\t\tthis.setState({activeStory: \"tab_main\", sticker_info: this.state.stickers[id]});\n\t\t\t\t\t\tsetTimeout(() => { this.go(\"sticker_info\"); }, 50)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({ user_stickers });\n\n\t\tvar user_stickers_history = [];\n\t\tfor (var i = 0; i < this.state.user.stickers_history.length; i++) {\n\t\t\tvar sticker = this.state.user.stickers_history[i];\n\t\t\tuser_stickers_history.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\ttitle={sticker.title}\n\t\t\t\t\tsrc={sticker.preview}\n\t\t\t\t\tmode2={sticker.hasOwnProperty('added') ? (sticker.added ? 'commerce' : 'destructive') : 'primary'}\n\t\t\t\t\tbutton={sticker.hasOwnProperty('added') ? (sticker.added ? 'Одобрено' : 'Отклонено') : 'На проверке'}\n\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({ user_stickers_history });\n\t}\n\tback = () => {\n\t\tlet activeStory = this.state.activeStory;\n\t\tlet activePanel = activeStory === 'tab_main' ? this.state.activePanelShop : activeStory === 'tab_other' ? this.state.activePanelOther : '';\n\t\tlet panel_to_change = activeStory === 'tab_main' ? 'activePanelShop' : activeStory === 'tab_other' ? 'activePanelOther' : '';\n\t\tif((activeStory === 'tab_main' && activePanel==='main') || (activeStory === 'tab_other' && activePanel==='profile')){\n\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t}else {\n\t\t\tlet history = activeStory === 'tab_main' ? this.state.historyShop : activeStory === 'tab_other' ? this.state.historyOther : '';\n\t\t\tif(history.length === 1) {\n\t\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t\t} else if (history.length > 1) {\n\t\t\t\thistory.pop();\n\t\t\t\tlet p = history[history.length - 1];\n\t\t\t\tthis.setState({[panel_to_change]: p});\n\t\t\t}\n\t\t}\n\t};\n\tgo(panel) {\n\t\tlet activeStory = this.state.activeStory;\n\t\tlet panel_to_change = activeStory === 'tab_main' ? 'activePanelShop' : activeStory === 'tab_other' ? 'activePanelOther' : '';\n\t\tlet history = activeStory === 'tab_main' ? this.state.historyShop : activeStory === 'tab_other' ? this.state.historyOther : '';\n\t\thistory.push(panel);\n\t\tlet history_to_change = activeStory === 'tab_main' ? 'historyShop' : activeStory === 'tab_other' ? 'historyOther' : '';\n\t\twindow.history.pushState({panel: panel}, 'Title');\n\t\tthis.setState({ [panel_to_change]: panel, [history_to_change]: history });\n\t}\n\n\tonStoryChange (e) {\n\t\tvar story = e.currentTarget.dataset.story;\n\t\tif(this.state.activeStory===story){\n\t\t\tif(story==='tab_main' && this.state.activePanelShop !== 'main'){\n\t\t\t\tthis.back();\n\t\t\t}else if(story==='tab_other' && this.state.activePanelOther !== 'profile'){\n\t\t\t\tthis.back();\n\t\t\t}\n\t\t}\n\t\tthis.setState({ activeStory: story });\n\t}\n\n\tonChange(e) {\n\t\tconst { name, value } = e.currentTarget;\n\t\tvar create_panel = this.state.create_panel;\n\t\tcreate_panel[name] = value;\n\t\tthis.setState({ create_panel: create_panel });\n\t}\n\n\tuploadFile(element, evt) {\n\t\tvar tgt = evt.target || window.event.srcElement,\n\t\t\tfiles = tgt.files;\n\t\tconst t = this;\n\t\tif (FileReader && files && files.length) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function () {\n\t\t\t\tvar res = fr.result; //base64 result, to get src -> array[0].props.src\n\t\t\t\tvar res1 = t.state.create_panel;\n\t\t\t\tif(files[files.length-1].type.includes('image')){\n\t\t\t\t\tif(element==='upload_sticker_img'){\n\t\t\t\t\t\tvar res10 = res1.hasOwnProperty('uploaded_stickers_img') ? res1.uploaded_stickers_img : [];\n\t\t\t\t\t\tres10.push(\n\t\t\t\t\t\t    <StickerImg\n\t\t\t\t\t\t\t\tmode={'small'}\n                                id={'uploaded_sticker_'+res10.length}\n                                src={res}\n\t\t\t\t\t\t\t\tonClick={(e)=>{ var id = parseInt(e.currentTarget.id.split('_')[2]); var res01 = t.state.create_panel; delete res01.uploaded_stickers_img[id];  t.setState({ create_panel: res01 }); }}\n                            />\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvar stickers_count = res10.filter(function(val){ return val !== undefined; }).length;\n\t\t\t\t\t\tif(stickers_count<100){\n\t\t\t\t\t\t\tres1.uploaded_stickers_img = res10;\n\t\t\t\t\t\t\tt.setState({ create_panel: res1 });\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tres1[element] = res;\n\t\t\t\t\t\tt.setState({ create_panel: res1});\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tres1[element] = null;\n\t\t\t\t\tt.setState({ create_panel: res1});\n\t\t\t\t}\n\t\t\t}\n\t\t\tfr.readAsDataURL(files[0]);\n\t\t}\n\n\t\t// Not supported\n\t\telse {\n\t\t\t// fallback -- perhaps submit the input to an iframe and temporarily store\n\t\t\t// them on the server until the user's session ends.\n\t\t}\n\t}\n\n\ttoggleCreateStickerContext () {\n\t\tthis.setState({ createStickerContextOpened: !this.state.createStickerContextOpened });\n\t}\n\n\turlToBase64(img) {\n\t\tvar canvas = document.createElement(\"canvas\");\n\t\tcanvas.width = img.width;\n\t\tcanvas.height = img.height;\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tctx.drawImage(img, 0, 0);\n\t\tvar dataURL = canvas.toDataURL(\"image/png\");\n\t\treturn dataURL.replace(/^data:image\\/(png|jpg);base64,/, \"\");\n\t}\n\n\n\tasync base64ToMultipart(base64) {\n\t\treturn await fetch(base64)\n\t\t\t.then(res => res.blob())\n\t\t\t.then(blob => {\n\t\t\t\tconst fd = new FormData();\n\t\t\t\tconst file = new File([blob], \"sticker.png\");\n\t\t\t\tfd.append('file', file);\n\t\t\t\treturn fd;\n\t\t\t});\n\t}\n\n\tasync install(sticker_id) {\n\t\ttry{\n\t\t\taccess_token = await bridge.sendPromise(\"VKWebAppGetAuthToken\", {\"app_id\": 7363654, \"scope\": \"docs\"});\n\t\t\tconsole.log(access_token);\n\t\t}catch (e) {\n\t\t\tconsole.log('error',e);\n\t\t}\n\n\t\t/*const API_URL = 'https://example.com/add_image';\n\t\tfetch(API_URL, {method: 'POST', body: this.base64ToMultipart()})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => console.log(res))*/\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Epic activeStory={this.state.activeStory} tabbar={\n\t\t\t\t<Tabbar>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={this.onStoryChange}\n\t\t\t\t\t\tselected={this.state.activeStory === 'tab_main'}\n\t\t\t\t\t\tdata-story=\"tab_main\"\n\t\t\t\t\t><Icon28MarketOutline/></TabbarItem>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={this.onStoryChange}\n\t\t\t\t\t\tselected={this.state.activeStory === 'tab_other'}\n\t\t\t\t\t\tdata-story=\"tab_other\"\n\t\t\t\t\t><Icon28UserOutline /></TabbarItem>\n\t\t\t\t</Tabbar>\n\t\t\t}>\n\t\t\t\t<View id=\"tab_main\" activePanel={this.state.activePanelShop} popout={this.state.popout} history={this.state.historyShop} onSwipeBack={this.back}>\n\t\t\t\t\t<Panel id=\"main\" separator={false}>\n\t\t\t\t\t\t<PanelHeader>Магазин</PanelHeader>\n\t\t\t\t\t\t<Separator />\n\t\t\t\t\t\t<Gallery\n\t\t\t\t\t\t\tslideWidth=\"100%\"\n\t\t\t\t\t\t\tstyle={{ height: \"100%\", margin: \"8px\" }}\n\t\t\t\t\t\t\tslideIndex={this.state.slideTabIndex}\n\t\t\t\t\t\t\tonChange={(slideIndex) => { this.setState({slideTabIndex: slideIndex}); }}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ fontSize: \"medium\"}}>\n\t\t\t\t\t\t\t\t\t<b>Новинки</b>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.stickers_panel}\n\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ fontSize: \"medium\"}}>\n\t\t\t\t\t\t\t\t\t<b>Популярные</b>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.stickers_panel}\n\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Gallery>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"sticker_info\">\n\t\t\t\t\t\t<PanelHeader>Магазин</PanelHeader>\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t<Cell before={<StickerImg mode={'medium'} src={this.state.sticker_info.preview}/>} description={this.state.sticker_info.author}>{this.state.sticker_info.title}</Cell>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<StickerDescription>{this.state.sticker_info.description}</StickerDescription>\n\t\t\t\t\t\t\t<div style={{ marginTop: '10px'}}>\n\t\t\t\t\t\t\t\t{this.state.user.stickers.indexOf(this.state.sticker_info.id)>=0 ? <div style={{ display: 'flex' }}><Button onClick={()=>{ this.install(this.state.sticker_info.id); }} size={\"xl\"} stretched>{'Установить'}</Button> <Button style={{ marginLeft: '8px' }} mode={\"secondary\"} size={\"xl\"} stretched>{'Очистить'}</Button></div>: <div style={{ display: 'flex' }}><Button size={\"xl\"} stretched mode=\"commerce\">{'Получить за '+this.state.sticker_info.price+' руб.'}</Button></div>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"centered\" style={{ marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t<StickerGrid mode={\"small\"}>\n\t\t\t\t\t\t\t\t\t{this.state.sticker_info.stickers}\n\t\t\t\t\t\t\t\t</StickerGrid>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t\t<View id=\"tab_other\" activePanel={this.state.activePanelOther} popout={this.state.popout} history={this.state.historyOther} onSwipeBack={this.back} header={false}>\n\t\t\t\t\t<Panel id=\"profile\">\n\t\t\t\t\t\t<PanelHeaderSimple><PanelHeaderContent>\n\t\t\t\t\t\t\tПрофиль\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t<div className=\"centered\">\n\t\t\t\t\t\t\t\t<Avatar src={this.state.user.photo_100} size={100}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<div className=\"centered\" style={{ fontSize: \"large\"}}>\n\t\t\t\t\t\t\t\t{this.state.user.first_name+' '+this.state.user.last_name}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<Group separator=\"hide\">\n\t\t\t\t\t\t\t\t<Cell expandable onClick={()=> { this.setState({ balance_manipulation: !this.state.balance_manipulation }); }} indicator={this.state.user.balance+' ₽'}>Ваш баланс</Cell>\n\t\t\t\t\t\t\t\t{this.state.balance_manipulation && <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '8px' }}>\n\t\t\t\t\t\t\t\t\t<Button size=\"l\" before={<Icon16Down/>}>Пополнить</Button>\n\t\t\t\t\t\t\t\t\t<Button size=\"l\" before={<Icon16Up/>} mode=\"secondary\" style={{ marginLeft: 8 }}>Вывести</Button>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t\t<Group separator=\"hide\" header={<Header mode=\"primary\">Ваши стикеры</Header>}>\n\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t\t<StickerGrid mode={\"big\"}>\n\t\t\t\t\t\t\t\t\t\t{this.state.user_stickers}\n\t\t\t\t\t\t\t\t\t\t<StickerImg mode={'big'} onClick={()=> { this.go(\"create\"); }}>\n                                            +\n                                        </StickerImg>\n\t\t\t\t\t\t\t\t\t</StickerGrid>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"create\">\n\t\t\t\t\t\t<PanelHeaderSimple>\n\t\t\t\t\t\t\t<PanelHeaderContent\n\t\t\t\t\t\t\t\taside={<Icon16Dropdown style={{ transform: `rotate(${this.state.createStickerContextOpened ? '180deg' : '0'})` }} />}\n\t\t\t\t\t\t\t\tonClick={ () => { this.toggleCreateStickerContext(); }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tДобавить стикеры\n\t\t\t\t\t\t\t</PanelHeaderContent>\n\t\t\t\t\t\t</PanelHeaderSimple>\n\t\t\t\t\t\t<PanelHeaderContext opened={this.state.createStickerContextOpened} onClose={ () => { this.toggleCreateStickerContext(); }}>\n\t\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\tbefore={<Icon28HistoryForwardOutline/>}\n\t\t\t\t\t\t\t\t\tonClick={ () => { this.toggleCreateStickerContext(); this.go(\"stickers_history\") }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tИстория\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</PanelHeaderContext>\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\ttop=\"Название стикер-пака\"\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.title}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.title ? this.state.create_panel.title.length <= 20 ? 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.title ? this.state.create_panel.title.length <= 20 ? '' : 'Максимальная длина - 20' : 'Пожалуйста, введите название'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\ttop=\"Описание\"\n\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.description}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.description ? this.state.create_panel.description.length <= 100 ? 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.description ? this.state.create_panel.description.length <= 100 ? '' : 'Максимальная длина - 100' : 'Пожалуйста, введите описание'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\ttop=\"Цена\"\n\t\t\t\t\t\t\t\tname=\"price\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.price}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.price > 0 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ? 'error' : 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.price > 0 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ? 'Число должно быть целым' : '' : 'Максимальная цена- 1 000 руб.' : 'Минимальная цена - 1 руб.'}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<StickerUploadButton\n\t\t\t\t\t\t\t\tsrc={this.state.create_panel.upload_preview_img && this.state.create_panel.upload_preview_img}\n\t\t\t\t\t\t\t\ttitle={'Превью'}\n\t\t\t\t\t\t\t\tdescription={'Загрузите главную фотографию стикер-пака (128×128px)'}\n\t\t\t\t\t\t\t\tonChange={(event)=> {this.uploadFile('upload_preview_img', event)}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<StickerUploadButton\n\t\t\t\t\t\t\t\ttitle={'Стикеры'}\n\t\t\t\t\t\t\t\tdescription={'Загрузите все стикеры (минимум - 4), которые будут содержаться в паке (128×128px)'}\n\t\t\t\t\t\t\t\tonChange={(event)=> {this.uploadFile('upload_sticker_img', event)}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div className=\"centered\" style={{ paddingBottom: \"16px\" }}>\n\t\t\t\t\t\t\t\t<div style={{ minWidth: \"64px\", maxWidth: \"296px\", display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, 64px)\", gridGap: \"10px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.create_panel.uploaded_stickers_img}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button size=\"xl\" disabled={this.state.create_panel.title ? this.state.create_panel.description ? this.state.create_panel.price > 0 ? this.state.create_panel.title.length <= 20 ? this.state.create_panel.description.length <= 100 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ?  true : this.state.create_panel.upload_preview_img ? this.state.create_panel.uploaded_stickers_img ? this.state.create_panel.uploaded_stickers_img.filter(function(val){ return val !== undefined; }).length >= 4 ? false : true : true : true : true : true : true : true : true : true }>Продолжить</Button>\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id={\"stickers_history\"}>\n\t\t\t\t\t\t<PanelHeaderSimple><PanelHeaderContent>\n\t\t\t\t\t\t\tИстория\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t{this.state.user_stickers_history && this.state.user_stickers_history.length > 0 ? <Div>\n\t\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t\t{this.state.user_stickers_history}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\t\ticon={<Icon56HistoryOutline/>}\n\t\t\t\t\t\t\t\theader={'Пусто'}\n\t\t\t\t\t\t\t\tstretched\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tВы пока еще не создавали стикеры\n\t\t\t\t\t\t\t</Placeholder>}\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t</Epic>\n\t\t);\n\t}\n}\n\nexport default App;\n\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport bridge from '@vkontakte/vk-bridge';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nbridge.send('VKWebAppInit');\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}